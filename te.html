<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Social Media Feed</title>
    <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-bg: #0d0d0d;
            --secondary-bg: #1a1a1a;
            --card-bg: #262626;
            --accent-red: #e53935;
            --accent-red-light: #ff6f61;
            --accent-red-dark: #ab000d;
            --accent-white: #ffffff;
            --text-primary: #f5f5f5;
            --text-secondary: #dcdcdc;
            --text-muted: #a6a6a6;
            --border-color: #333333;
            --glow-color: rgba(229, 57, 53, 0.25);
            --success-color: #43a047;
            --warning-color: #ff7043;
        }

        body {
            background-color: var(--primary-bg);
            color: var(--text-primary);
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 16px;
        }

        .main-layout {
            display: flex;
            gap: 24px;
            flex-wrap: wrap;
        }

        .main-content {
            flex: 1;
            min-width: 300px;
            max-width: 600px;
        }

        .sidebar {
            width: 320px;
            min-width: 280px;
        }

        .card {
            background-color: var(--card-bg);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            margin-bottom: 16px;
            overflow: hidden;
        }

        .card-padding {
            padding: 16px;
        }

        /* Stories Section */
        .stories-container {
            display: flex;
            gap: 12px;
            overflow-x: auto;
            padding-bottom: 8px;
            scrollbar-width: none;
            -ms-overflow-style: none;
        }

        .stories-container::-webkit-scrollbar {
            display: none;
        }

        .story-item {
            flex-shrink: 0;
            cursor: pointer;
            text-align: center;
        }

        .story-card {
            width: 80px;
            height: 112px;
            background-color: var(--secondary-bg);
            border-radius: 12px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
            border: 1px solid var(--border-color);
            transition: all 0.3s ease;
            margin-bottom: 8px;
        }

        .story-card:hover {
            box-shadow: 0 0 20px var(--glow-color);
        }

        .story-ring {
            background: conic-gradient(from 0deg, var(--accent-red), var(--accent-red-light), var(--accent-red));
            border-radius: 12px;
            padding: 2px;
        }

        .story-content {
            width: 100%;
            height: 100%;
            background-color: var(--card-bg);
            border-radius: 10px;
            position: relative;
            overflow: hidden;
        }

        .story-media {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 10px;
        }

        .story-avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background-color: var(--secondary-bg);
            display: flex;
            align-items: center;
            justify-content: center;
            position: absolute;
            top: 8px;
            left: 8px;
            z-index: 2;
            border: 2px solid white;
        }

        .story-add-btn {
            width: 20px;
            height: 20px;
            background-color: var(--accent-red);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            position: absolute;
            bottom: 8px;
            right: 8px;
            color: white;
            font-weight: bold;
            font-size: 12px;
        }

        .story-name {
            font-size: 12px;
            color: var(--text-muted);
            font-weight: 500;
            margin-top: 4px;
            padding: 0 4px;
        }

        /* Post Creation */
        .post-creation {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 12px;
        }

        .avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: var(--secondary-bg);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .post-input {
            flex: 1;
            background-color: var(--secondary-bg);
            border: 1px solid var(--border-color);
            border-radius: 24px;
            padding: 12px 16px;
            color: var(--text-primary);
            outline: none;
            cursor: pointer;
            transition: border-color 0.3s ease;
        }

        .post-input:focus {
            border-color: var(--accent-red);
        }

        .post-actions {
            display: flex;
            justify-content: space-around;
            padding-top: 12px;
            border-top: 1px solid var(--border-color);
        }

        .post-action-btn {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 16px;
            border-radius: 8px;
            background: none;
            border: none;
            color: var(--text-secondary);
            cursor: pointer;
            transition: background-color 0.3s ease;
            flex: 1;
            justify-content: center;
        }

        .post-action-btn:hover {
            background-color: var(--secondary-bg);
        }

        /* Feed Posts */
        .post-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 12px;
        }

        .post-author {
            flex: 1;
        }

        .post-author h3 {
            font-size: 16px;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 2px;
        }

        .post-time {
            font-size: 14px;
            color: var(--text-muted);
        }

        .post-menu-btn {
            background: none;
            border: none;
            color: var(--text-muted);
            cursor: pointer;
            padding: 4px;
            border-radius: 4px;
            transition: color 0.3s ease;
        }

        .post-menu-btn:hover {
            color: var(--text-primary);
        }

        .post-content {
            color: var(--text-secondary);
            margin-bottom: 12px;
            line-height: 1.5;
        }

        .post-media {
            border-radius: 8px;
            margin-bottom: 12px;
            overflow: hidden;
        }

        .post-image {
            width: 100%;
            height: auto;
            max-height: 400px;
            object-fit: cover;
            display: block;
        }

        .post-video {
            width: 100%;
            height: auto;
            max-height: 400px;
            display: block;
        }

        .post-reactions {
            display: flex;
            justify-content: space-around;
            padding: 8px 0;
            border-top: 1px solid var(--border-color);
        }

        .reaction-btn {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 16px;
            border-radius: 8px;
            background: none;
            border: none;
            color: var(--text-muted);
            cursor: pointer;
            transition: all 0.3s ease;
            flex: 1;
            justify-content: center;
        }

        .reaction-btn:hover {
            background-color: var(--secondary-bg);
        }

        .reaction-btn.liked {
            color: var(--accent-red);
        }

        /* Sidebar */
        .sidebar-section {
            margin-bottom: 16px;
        }

        .sidebar-title {
            font-size: 16px;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 16px;
        }

        .friend-request, .mentor-suggestion {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 12px;
        }

        .friend-info, .mentor-info {
            flex: 1;
            min-width: 0;
        }

        .friend-name, .mentor-name {
            font-size: 14px;
            font-weight: 500;
            color: var(--text-primary);
            margin-bottom: 2px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .friend-mutual, .mentor-role {
            font-size: 12px;
            color: var(--text-muted);
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .friend-actions {
            display: flex;
            gap: 8px;
            margin-top: 8px;
        }

        .btn-primary {
            background-color: var(--accent-red);
            color: white;
            border: none;
            padding: 6px 12px;
            border-radius: 6px;
            font-size: 12px;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        .btn-primary:hover {
            background-color: var(--accent-red-dark);
        }

        .btn-secondary {
            background-color: var(--secondary-bg);
            color: var(--text-muted);
            border: none;
            padding: 6px 12px;
            border-radius: 6px;
            font-size: 12px;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        .btn-secondary:hover {
            background-color: var(--border-color);
        }

        /* Modals */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.8);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            padding: 16px;
        }

        .modal {
            background-color: var(--card-bg);
            border-radius: 12px;
            width: 100%;
            max-width: 500px;
            max-height: 90vh;
            overflow-y: auto;
        }

        .modal-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 16px;
            border-bottom: 1px solid var(--border-color);
        }

        .modal-title {
            font-size: 18px;
            font-weight: 600;
            color: var(--text-primary);
        }

        .modal-close {
            background: none;
            border: none;
            color: var(--text-muted);
            cursor: pointer;
            padding: 4px;
            border-radius: 4px;
            transition: color 0.3s ease;
        }

        .modal-close:hover {
            color: var(--text-primary);
        }

        .modal-body {
            padding: 16px;
        }

        .form-group {
            margin-bottom: 16px;
        }

        .form-label {
            display: block;
            font-size: 14px;
            font-weight: 500;
            color: var(--text-secondary);
            margin-bottom: 8px;
        }

        .form-input, .form-select, .form-textarea {
            width: 100%;
            background-color: var(--secondary-bg);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 12px;
            color: var(--text-primary);
            outline: none;
            transition: border-color 0.3s ease;
        }

        .form-input:focus, .form-select:focus, .form-textarea:focus {
            border-color: var(--accent-red);
        }

        .form-textarea {
            resize: none;
            height: 96px;
        }

        .color-picker {
            display: flex;
            gap: 8px;
            margin-top: 8px;
        }

        .color-option {
            width: 32px;
            height: 32px;
            border-radius: 6px;
            border: 2px solid transparent;
            cursor: pointer;
            transition: border-color 0.3s ease;
        }

        .color-option.selected {
            border-color: white;
        }

        /* Status Modal */
        .status-modal-overlay {
            background-color: rgba(0, 0, 0, 0.95);
        }

        .status-modal {
            position: relative;
            width: 100%;
            max-width: 400px;
            height: 600px;
            background: linear-gradient(135deg, var(--secondary-bg), var(--card-bg));
            border-radius: 12px;
            overflow: hidden;
        }

        .status-content {
            position: absolute;
            inset: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 32px;
            text-align: center;
        }

        .status-media-container {
            width: 100%;
            height: 100%;
            position: relative;
            overflow: hidden;
            border-radius: 12px;
        }

        .status-media {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .status-text-overlay {
            position: absolute;
            bottom: 80px;
            left: 16px;
            right: 16px;
            color: white;
            font-size: 18px;
            font-weight: 600;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.5);
            text-align: center;
        }

        .status-progress {
            position: absolute;
            top: 16px;
            left: 16px;
            right: 64px;
            display: flex;
            gap: 4px;
        }

        .progress-bar {
            flex: 1;
            height: 3px;
            background-color: rgba(255, 255, 255, 0.3);
            border-radius: 2px;
        }

        .progress-bar.active {
            background-color: white;
        }

        .status-info {
            position: absolute;
            bottom: 16px;
            left: 16px;
            right: 16px;
            color: white;
        }

        .status-name {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 4px;
        }

        .status-time {
            font-size: 12px;
            opacity: 0.8;
        }

        .status-nav {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            color: white;
            cursor: pointer;
            padding: 8px;
            border-radius: 50%;
            transition: background-color 0.3s ease;
        }

        .status-nav:hover {
            background-color: rgba(255, 255, 255, 0.1);
        }

        .status-nav.prev {
            left: 16px;
        }

        .status-nav.next {
            right: 16px;
        }

        .status-close {
            position: absolute;
            top: 16px;
            right: 16px;
            background: none;
            border: none;
            color: white;
            cursor: pointer;
            padding: 8px;
            border-radius: 50%;
            transition: background-color 0.3s ease;
            z-index: 10;
        }

        .status-close:hover {
            background-color: rgba(255, 255, 255, 0.1);
        }

        /* Comments Section */
        .comments-section {
            padding: 16px;
            border-top: 1px solid var(--border-color);
        }

        .comment-input-container {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .comment-input {
            flex: 1;
            background-color: var(--secondary-bg);
            border: 1px solid var(--border-color);
            border-radius: 20px;
            padding: 8px 16px;
            color: var(--text-primary);
            outline: none;
            transition: border-color 0.3s ease;
        }

        .comment-input:focus {
            border-color: var(--accent-red);
        }

        /* Load More Button */
        .load-more-container {
            text-align: center;
            padding: 16px;
        }

        .load-more-btn {
            background-color: var(--accent-red);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            font-weight: 500;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        .load-more-btn:hover {
            background-color: var(--accent-red-dark);
        }

        /* Media Preview */
        .media-preview {
            margin-top: 12px;
            border-radius: 8px;
            overflow: hidden;
            max-height: 200px;
        }

        .media-preview img, .media-preview video {
            width: 100%;
            height: auto;
            max-height: 200px;
            object-fit: cover;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .container {
                padding: 8px;
            }

            .main-layout {
                flex-direction: column;
                gap: 16px;
            }

            .sidebar {
                width: 100%;
                order: -1;
            }

            .main-content {
                max-width: none;
            }

            .story-card {
                width: 72px;
                height: 100px;
            }

            .story-avatar {
                width: 28px;
                height: 28px;
                top: 6px;
                left: 6px;
            }

            .story-add-btn {
                width: 18px;
                height: 18px;
                bottom: 6px;
                right: 6px;
                font-size: 10px;
            }

            .post-actions {
                flex-direction: column;
                gap: 8px;
            }

            .post-action-btn {
                justify-content: flex-start;
            }

            .post-reactions {
                flex-direction: column;
                gap: 8px;
            }

            .reaction-btn {
                justify-content: flex-start;
            }

            .friend-actions {
                flex-direction: column;
                gap: 4px;
            }

            .modal {
                margin: 16px;
                max-height: calc(100vh - 32px);
            }

            .status-modal {
                height: 500px;
                max-width: 350px;
            }
        }

        @media (max-width: 480px) {
            .card-padding {
                padding: 12px;
            }

            .story-card {
                width: 64px;
                height: 88px;
            }

            .avatar {
                width: 36px;
                height: 36px;
            }

            .post-input {
                padding: 10px 14px;
                font-size: 14px;
            }

            .modal-body {
                padding: 12px;
            }

            .status-modal {
                height: 450px;
                max-width: 320px;
            }
        }

        /* Hidden class */
        .hidden {
            display: none !important;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // LocalStorage utilities
        const storage = {
            get: (key) => {
                try {
                    const item = localStorage.getItem(key);
                    return item ? JSON.parse(item) : null;
                } catch (error) {
                    console.error('Error reading from localStorage:', error);
                    return null;
                }
            },
            set: (key, value) => {
                try {
                    localStorage.setItem(key, JSON.stringify(value));
                } catch (error) {
                    console.error('Error writing to localStorage:', error);
                }
            }
        };

        // Sample media URLs
        const sampleImages = [
            'https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=400&h=300&fit=crop',
            'https://images.unsplash.com/photo-1469474968028-56623f02e42e?w=400&h=300&fit=crop',
            'https://images.unsplash.com/photo-1441974231531-c6227db76b6e?w=400&h=300&fit=crop',
            'https://images.unsplash.com/photo-1518837695005-2083093ee35b?w=400&h=300&fit=crop',
            'https://images.unsplash.com/photo-1501594907352-04cda38ebc29?w=400&h=300&fit=crop'
        ];

        const sampleVideos = [
            'https://sample-videos.com/zip/10/mp4/SampleVideo_1280x720_1mb.mp4',
            'https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4',
            'https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/ElephantsDream.mp4'
        ];

        // Stories Component
        const Stories = ({ stories, onAddStatus, onViewStatus }) => {
            return (
                <div className="card">
                    <div className="card-padding">
                        <div className="stories-container">
                            <div className="story-item" onClick={onAddStatus}>
                                <div className="story-card">
                                    <div className="story-avatar">
                                        <ion-icon name="person"></ion-icon>
                                    </div>
                                    <div className="story-add-btn">+</div>
                                </div>
                                <div className="story-name">Add Status</div>
                            </div>
                            {stories.map((story, index) => (
                                <div key={story.id} className="story-item" onClick={() => onViewStatus(index)}>
                                    <div className="story-ring">
                                        <div className="story-content">
                                            {story.type === 'image' && story.mediaUrl ? (
                                                <img 
                                                    src={story.mediaUrl} 
                                                    alt="Story" 
                                                    className="story-media"
                                                    onError={(e) => {
                                                        e.target.style.display = 'none';
                                                        e.target.nextSibling.style.display = 'flex';
                                                    }}
                                                />
                                            ) : story.type === 'video' && story.mediaUrl ? (
                                                <video 
                                                    src={story.mediaUrl} 
                                                    className="story-media"
                                                    muted
                                                    onError={(e) => {
                                                        e.target.style.display = 'none';
                                                        e.target.nextSibling.style.display = 'flex';
                                                    }}
                                                />
                                            ) : null}
                                            <div style={{ 
                                                background: `linear-gradient(135deg, ${story.backgroundColor}, ${story.backgroundColor}aa)`,
                                                position: 'absolute',
                                                inset: '0',
                                                display: story.type === 'text' ? 'flex' : 'none',
                                                alignItems: 'center',
                                                justifyContent: 'center',
                                                color: 'white',
                                                fontSize: '10px',
                                                textAlign: 'center',
                                                padding: '8px'
                                            }}>
                                                {story.content.substring(0, 30)}...
                                            </div>
                                            <div className="story-avatar">
                                                <span>{story.avatar}</span>
                                            </div>
                                        </div>
                                    </div>
                                    <div className="story-name">{story.name.split(' ')[0]}</div>
                                </div>
                            ))}
                        </div>
                    </div>
                </div>
            );
        };

        // Post Creation Component
        const PostCreation = ({ onCreatePost }) => {
            const [showModal, setShowModal] = useState(false);
            const [postContent, setPostContent] = useState('');
            const [postType, setPostType] = useState('text');
            const [mediaUrl, setMediaUrl] = useState('');

            const handleSubmit = () => {
                if (postContent.trim()) {
                    onCreatePost({
                        content: postContent,
                        type: postType,
                        mediaUrl: mediaUrl || null
                    });
                    setPostContent('');
                    setMediaUrl('');
                    setPostType('text');
                    setShowModal(false);
                }
            };

            const getRandomMedia = (type) => {
                if (type === 'image') {
                    return sampleImages[Math.floor(Math.random() * sampleImages.length)];
                } else if (type === 'video') {
                    return sampleVideos[Math.floor(Math.random() * sampleVideos.length)];
                }
                return '';
            };

            return (
                <>
                    <div className="card">
                        <div className="card-padding">
                            <div className="post-creation">
                                <div className="avatar">
                                    <ion-icon name="person"></ion-icon>
                                </div>
                                <input 
                                    type="text" 
                                    className="post-input" 
                                    placeholder="What's on your mind?"
                                    onClick={() => setShowModal(true)}
                                    readOnly
                                />
                            </div>
                            <div className="post-actions">
                                <button className="post-action-btn" onClick={() => {
                                    setPostType('image');
                                    setMediaUrl(getRandomMedia('image'));
                                    setShowModal(true);
                                }}>
                                    <ion-icon name="image" style={{ color: 'var(--success-color)' }}></ion-icon>
                                    <span>Photo</span>
                                </button>
                                <button className="post-action-btn" onClick={() => {
                                    setPostType('video');
                                    setMediaUrl(getRandomMedia('video'));
                                    setShowModal(true);
                                }}>
                                    <ion-icon name="videocam" style={{ color: 'var(--accent-red)' }}></ion-icon>
                                    <span>Video</span>
                                </button>
                                <button className="post-action-btn" onClick={() => setShowModal(true)}>
                                    <ion-icon name="happy" style={{ color: 'var(--warning-color)' }}></ion-icon>
                                    <span>Feeling</span>
                                </button>
                            </div>
                        </div>
                    </div>

                    {showModal && (
                        <div className="modal-overlay" onClick={(e) => e.target === e.currentTarget && setShowModal(false)}>
                            <div className="modal">
                                <div className="modal-header">
                                    <h3 className="modal-title">Create Post</h3>
                                    <button className="modal-close" onClick={() => setShowModal(false)}>
                                        <ion-icon name="close"></ion-icon>
                                    </button>
                                </div>
                                <div className="modal-body">
                                    <div className="post-creation">
                                        <div className="avatar">
                                            <ion-icon name="person"></ion-icon>
                                        </div>
                                        <div style={{ flex: 1 }}>
                                            <h4 style={{ color: 'var(--text-primary)', marginBottom: '4px' }}>Your Name</h4>
                                            <select className="form-select" style={{ width: 'auto', padding: '4px 8px', fontSize: '12px' }}>
                                                <option>Public</option>
                                                <option>Friends</option>
                                                <option>Only me</option>
                                            </select>
                                        </div>
                                    </div>
                                    
                                    <div className="form-group" style={{ marginTop: '16px' }}>
                                        <label className="form-label">Post Type</label>
                                        <select 
                                            className="form-select" 
                                            value={postType}
                                            onChange={(e) => {
                                                setPostType(e.target.value);
                                                if (e.target.value !== 'text') {
                                                    setMediaUrl(getRandomMedia(e.target.value));
                                                } else {
                                                    setMediaUrl('');
                                                }
                                            }}
                                        >
                                            <option value="text">Text Only</option>
                                            <option value="image">With Image</option>
                                            <option value="video">With Video</option>
                                        </select>
                                    </div>

                                    <textarea 
                                        className="form-textarea"
                                        placeholder="What's on your mind?"
                                        value={postContent}
                                        onChange={(e) => setPostContent(e.target.value)}
                                        style={{ height: '120px', fontSize: '16px' }}
                                    />

                                    {postType !== 'text' && (
                                        <div className="form-group">
                                            <label className="form-label">Media URL</label>
                                            <input 
                                                type="url" 
                                                className="form-input"
                                                placeholder="Enter image or video URL"
                                                value={mediaUrl}
                                                onChange={(e) => setMediaUrl(e.target.value)}
                                            />
                                            <button 
                                                type="button"
                                                className="btn-secondary"
                                                onClick={() => setMediaUrl(getRandomMedia(postType))}
                                                style={{ marginTop: '8px' }}
                                            >
                                                Use Random {postType === 'image' ? 'Image' : 'Video'}
                                            </button>
                                            {mediaUrl && (
                                                <div className="media-preview">
                                                    {postType === 'image' ? (
                                                        <img src={mediaUrl} alt="Preview" onError={(e) => e.target.style.display = 'none'} />
                                                    ) : (
                                                        <video src={mediaUrl} controls onError={(e) => e.target.style.display = 'none'} />
                                                    )}
                                                </div>
                                            )}
                                        </div>
                                    )}

                                    <button className="btn-primary" onClick={handleSubmit} style={{ width: '100%', marginTop: '16px', padding: '12px' }}>
                                        Post
                                    </button>
                                </div>
                            </div>
                        </div>
                    )}
                </>
            );
        };

        // Feed Post Component
        const FeedPost = ({ post, onLike, onComment }) => {
            const [showComments, setShowComments] = useState(false);
            const [commentText, setCommentText] = useState('');

            const formatTime = (timestamp) => {
                const now = Date.now();
                const diff = now - timestamp;
                const minutes = Math.floor(diff / (1000 * 60));
                const hours = Math.floor(diff / (1000 * 60 * 60));
                const days = Math.floor(diff / (1000 * 60 * 60 * 24));
                
                if (minutes < 60) return `${minutes}m ago`;
                if (hours < 24) return `${hours}h ago`;
                return `${days}d ago`;
            };

            const handleComment = () => {
                if (commentText.trim()) {
                    onComment(post.id, commentText);
                    setCommentText('');
                }
            };

            return (
                <div className="card">
                    <div className="card-padding">
                        <div className="post-header">
                            <div className="avatar">
                                <span>{post.avatar}</span>
                            </div>
                            <div className="post-author">
                                <h3>{post.name}</h3>
                                <div className="post-time">{formatTime(post.timestamp)}</div>
                            </div>
                            <button className="post-menu-btn">
                                <ion-icon name="ellipsis-vertical"></ion-icon>
                            </button>
                        </div>
                        <div className="post-content">{post.content}</div>
                        {post.mediaUrl && (
                            <div className="post-media">
                                {post.type === 'image' ? (
                                    <img 
                                        src={post.mediaUrl} 
                                        alt="Post content" 
                                        className="post-image"
                                        onError={(e) => e.target.style.display = 'none'}
                                    />
                                ) : post.type === 'video' ? (
                                    <video 
                                        src={post.mediaUrl} 
                                        className="post-video"
                                        controls
                                        onError={(e) => e.target.style.display = 'none'}
                                    />
                                ) : null}
                            </div>
                        )}
                    </div>
                    <div className="post-reactions">
                        <button 
                            className={`reaction-btn ${post.liked ? 'liked' : ''}`}
                            onClick={() => onLike(post.id)}
                        >
                            <ion-icon name={post.liked ? "heart" : "heart-outline"}></ion-icon>
                            <span>{post.liked ? 'Liked' : 'Like'} ({post.likes || 0})</span>
                        </button>
                        <button 
                            className="reaction-btn"
                            onClick={() => setShowComments(!showComments)}
                        >
                            <ion-icon name="chatbubble-outline"></ion-icon>
                            <span>Comment ({post.comments?.length || 0})</span>
                        </button>
                        <button className="reaction-btn">
                            <ion-icon name="share-outline"></ion-icon>
                            <span>Share</span>
                        </button>
                    </div>
                    {showComments && (
                        <div className="comments-section">
                            {post.comments?.map((comment, index) => (
                                <div key={index} style={{ marginBottom: '12px', padding: '8px', backgroundColor: 'var(--secondary-bg)', borderRadius: '8px' }}>
                                    <div style={{ display: 'flex', alignItems: 'center', gap: '8px', marginBottom: '4px' }}>
                                        <div className="avatar" style={{ width: '24px', height: '24px' }}>
                                            <span style={{ fontSize: '12px' }}>ðŸ˜Š</span>
                                        </div>
                                        <span style={{ fontSize: '14px', fontWeight: '500', color: 'var(--text-primary)' }}>You</span>
                                        <span style={{ fontSize: '12px', color: 'var(--text-muted)' }}>{formatTime(comment.timestamp)}</span>
                                    </div>
                                    <p style={{ fontSize: '14px', color: 'var(--text-secondary)', marginLeft: '32px' }}>{comment.text}</p>
                                </div>
                            ))}
                            <div className="comment-input-container">
                                <div className="avatar" style={{ width: '32px', height: '32px' }}>
                                    <span style={{ fontSize: '14px' }}>ðŸ˜Š</span>
                                </div>
                                <input 
                                    type="text" 
                                    className="comment-input" 
                                    placeholder="Write a comment..."
                                    value={commentText}
                                    onChange={(e) => setCommentText(e.target.value)}
                                    onKeyPress={(e) => e.key === 'Enter' && handleComment()}
                                />
                                <button 
                                    className="btn-primary"
                                    onClick={handleComment}
                                    style={{ padding: '8px 12px' }}
                                >
                                    Post
                                </button>
                            </div>
                        </div>
                    )}
                </div>
            );
        };

        // Feed Component
        const Feed = ({ posts, onLoadMore, onLike, onComment }) => {
            return (
                <div>
                    {posts.map(post => (
                        <FeedPost 
                            key={post.id} 
                            post={post} 
                            onLike={onLike}
                            onComment={onComment}
                        />
                    ))}
                    <div className="load-more-container">
                        <button className="load-more-btn" onClick={onLoadMore}>
                            Load More Posts
                        </button>
                    </div>
                </div>
            );
        };

        // Friend Requests Component
        const FriendRequests = () => {
            const [requests, setRequests] = useState(() => {
                return storage.get('friendRequests') || [
                    { id: 1, name: 'John Smith', avatar: 'ðŸ‘¨', mutualFriends: 2 },
                    { id: 2, name: 'Lisa Brown', avatar: 'ðŸ‘©', mutualFriends: 5 }
                ];
            });

            useEffect(() => {
                storage.set('friendRequests', requests);
            }, [requests]);

            const handleAccept = (id) => {
                setRequests(requests.filter(req => req.id !== id));
            };

            const handleDecline = (id) => {
                setRequests(requests.filter(req => req.id !== id));
            };

            return (
                <div className="card sidebar-section">
                    <div className="card-padding">
                        <h3 className="sidebar-title">Friend Requests</h3>
                        {requests.map(request => (
                            <div key={request.id} className="friend-request">
                                <div className="avatar">
                                    <span>{request.avatar}</span>
                                </div>
                                <div className="friend-info">
                                    <div className="friend-name">{request.name}</div>
                                    <div className="friend-mutual">{request.mutualFriends} mutual friends</div>
                                    <div className="friend-actions">
                                        <button className="btn-primary" onClick={() => handleAccept(request.id)}>
                                            Accept
                                        </button>
                                        <button className="btn-secondary" onClick={() => handleDecline(request.id)}>
                                            Decline
                                        </button>
                                    </div>
                                </div>
                            </div>
                        ))}
                    </div>
                </div>
            );
        };

        // Suggested Mentors Component
        const SuggestedMentors = () => {
            const [mentors, setMentors] = useState(() => {
                return storage.get('mentors') || [
                    { id: 1, name: 'Dr. Amanda Wilson', avatar: 'ðŸ‘©â€ðŸ’¼', role: 'Senior Software Engineer', connected: false },
                    { id: 2, name: 'Mark Rodriguez', avatar: 'ðŸ‘¨â€ðŸ’¼', role: 'Product Manager', connected: false }
                ];
            });

            useEffect(() => {
                storage.set('mentors', mentors);
            }, [mentors]);

            const handleConnect = (id) => {
                setMentors(mentors.map(mentor => 
                    mentor.id === id ? { ...mentor, connected: true } : mentor
                ));
            };

            return (
                <div className="card sidebar-section">
                    <div className="card-padding">
                        <h3 className="sidebar-title">Suggested Mentors</h3>
                        {mentors.map(mentor => (
                            <div key={mentor.id} className="mentor-suggestion">
                                <div className="avatar">
                                    <span>{mentor.avatar}</span>
                                </div>
                                <div className="mentor-info">
                                    <div className="mentor-name">{mentor.name}</div>
                                    <div className="mentor-role">{mentor.role}</div>
                                    <button 
                                        className={mentor.connected ? "btn-secondary" : "btn-primary"}
                                        onClick={() => handleConnect(mentor.id)}
                                        disabled={mentor.connected}
                                        style={{ marginTop: '8px' }}
                                    >
                                        {mentor.connected ? 'Pending' : 'Connect'}
                                    </button>
                                </div>
                            </div>
                        ))}
                    </div>
                </div>
            );
        };

        // Sidebar Component
        const Sidebar = () => {
            return (
                <div className="sidebar">
                    <FriendRequests />
                    <SuggestedMentors />
                </div>
            );
        };

        // Status Modal Component
        const StatusModal = ({ isOpen, onClose, stories, currentIndex, onNext, onPrev }) => {
            if (!isOpen || !stories.length) return null;

            const story = stories[currentIndex];
            
            const formatTime = (timestamp) => {
                const now = Date.now();
                const diff = now - timestamp;
                const hours = Math.floor(diff / (1000 * 60 * 60));
                return `${hours}h ago`;
            };

            return (
                <div className="modal-overlay status-modal-overlay" onClick={onClose}>
                    <div className="status-modal" onClick={(e) => e.stopPropagation()}>
                        <button className="status-close" onClick={onClose}>
                            <ion-icon name="close"></ion-icon>
                        </button>
                        
                        <div className="status-progress">
                            {stories.map((_, index) => (
                                <div 
                                    key={index} 
                                    className={`progress-bar ${index === currentIndex ? 'active' : ''}`}
                                />
                            ))}
                        </div>

                        <div className="status-media-container">
                            {story.type === 'image' && story.mediaUrl ? (
                                <img 
                                    src={story.mediaUrl} 
                                    alt="Status" 
                                    className="status-media"
                                    onError={(e) => {
                                        e.target.style.display = 'none';
                                        e.target.nextSibling.style.display = 'flex';
                                    }}
                                />
                            ) : story.type === 'video' && story.mediaUrl ? (
                                <video 
                                    src={story.mediaUrl} 
                                    className="status-media"
                                    autoPlay
                                    muted
                                    loop
                                    onError={(e) => {
                                        e.target.style.display = 'none';
                                        e.target.nextSibling.style.display = 'flex';
                                    }}
                                />
                            ) : null}
                            
                            <div 
                                className="status-content"
                                style={{ 
                                    background: story.type === 'text' ? `linear-gradient(135deg, ${story.backgroundColor}, ${story.backgroundColor}aa)` : 'transparent',
                                    display: story.type === 'text' ? 'flex' : 'none'
                                }}
                            >
                                <div style={{ fontSize: '48px', marginBottom: '16px' }}>{story.avatar}</div>
                                <p style={{ fontSize: '18px', fontWeight: '500', color: 'white' }}>{story.content}</p>
                            </div>

                            {(story.type === 'image' || story.type === 'video') && (
                                <div className="status-text-overlay">
                                    {story.content}
                                </div>
                            )}
                        </div>

                        <div className="status-info">
                            <div className="status-name">{story.name}</div>
                            <div className="status-time">{formatTime(story.timestamp)}</div>
                        </div>

                        <button className="status-nav prev" onClick={onPrev}>
                            <ion-icon name="chevron-back"></ion-icon>
                        </button>
                        <button className="status-nav next" onClick={onNext}>
                            <ion-icon name="chevron-forward"></ion-icon>
                        </button>
                    </div>
                </div>
            );
        };

        // Add Status Modal Component
        const AddStatusModal = ({ isOpen, onClose, onAdd }) => {
            const [statusType, setStatusType] = useState('text');
            const [statusText, setStatusText] = useState('');
            const [mediaUrl, setMediaUrl] = useState('');
            const [selectedColor, setSelectedColor] = useState('#e53935');

            const colors = ['#e53935', '#ff6f61', '#43a047', '#1976d2', '#7b1fa2', '#ff7043'];

            const getRandomMedia = (type) => {
                if (type === 'image') {
                    return sampleImages[Math.floor(Math.random() * sampleImages.length)];
                } else if (type === 'video') {
                    return sampleVideos[Math.floor(Math.random() * sampleVideos.length)];
                }
                return '';
            };

            const handleSubmit = () => {
                if (statusText.trim()) {
                    onAdd({
                        type: statusType,
                        content: statusText,
                        mediaUrl: statusType !== 'text' ? mediaUrl : null,
                        backgroundColor: selectedColor
                    });
                    setStatusText('');
                    setMediaUrl('');
                    setStatusType('text');
                    onClose();
                }
            };

            if (!isOpen) return null;

            return (
                <div className="modal-overlay" onClick={(e) => e.target === e.currentTarget && onClose()}>
                    <div className="modal">
                        <div className="modal-header">
                            <h3 className="modal-title">Add Status</h3>
                            <button className="modal-close" onClick={onClose}>
                                <ion-icon name="close"></ion-icon>
                            </button>
                        </div>
                        <div className="modal-body">
                            <div className="form-group">
                                <label className="form-label">Status Type</label>
                                <select 
                                    className="form-select" 
                                    value={statusType}
                                    onChange={(e) => {
                                        setStatusType(e.target.value);
                                        if (e.target.value !== 'text') {
                                            setMediaUrl(getRandomMedia(e.target.value));
                                        } else {
                                            setMediaUrl('');
                                        }
                                    }}
                                >
                                    <option value="text">Text Status</option>
                                    <option value="image">Image Status</option>
                                    <option value="video">Video Status</option>
                                </select>
                            </div>
                            <div className="form-group">
                                <label className="form-label">Content</label>
                                <textarea 
                                    className="form-textarea"
                                    placeholder="What's happening?"
                                    value={statusText}
                                    onChange={(e) => setStatusText(e.target.value)}
                                />
                            </div>
                            {statusType !== 'text' && (
                                <div className="form-group">
                                    <label className="form-label">Media URL</label>
                                    <input 
                                        type="url" 
                                        className="form-input"
                                        placeholder="Enter image or video URL"
                                        value={mediaUrl}
                                        onChange={(e) => setMediaUrl(e.target.value)}
                                    />
                                    <button 
                                        type="button"
                                        className="btn-secondary"
                                        onClick={() => setMediaUrl(getRandomMedia(statusType))}
                                        style={{ marginTop: '8px' }}
                                    >
                                        Use Random {statusType === 'image' ? 'Image' : 'Video'}
                                    </button>
                                    {mediaUrl && (
                                        <div className="media-preview">
                                            {statusType === 'image' ? (
                                                <img src={mediaUrl} alt="Preview" onError={(e) => e.target.style.display = 'none'} />
                                            ) : (
                                                <video src={mediaUrl} controls onError={(e) => e.target.style.display = 'none'} />
                                            )}
                                        </div>
                                    )}
                                </div>
                            )}
                            <div className="form-group">
                                <label className="form-label">Background Color</label>
                                <div className="color-picker">
                                    {colors.map(color => (
                                        <button
                                            key={color}
                                            className={`color-option ${selectedColor === color ? 'selected' : ''}`}
                                            style={{ backgroundColor: color }}
                                            onClick={() => setSelectedColor(color)}
                                        />
                                    ))}
                                </div>
                            </div>
                            <button className="btn-primary" onClick={handleSubmit} style={{ width: '100%', padding: '12px' }}>
                                Add Status
                            </button>
                        </div>
                    </div>
                </div>
            );
        };

        // Main App Component
        const App = () => {
            const [posts, setPosts] = useState(() => storage.get('posts') || []);
            const [stories, setStories] = useState(() => storage.get('stories') || []);
            const [showStatusModal, setShowStatusModal] = useState(false);
            const [showAddStatusModal, setShowAddStatusModal] = useState(false);
            const [currentStatusIndex, setCurrentStatusIndex] = useState(0);

            // Save to localStorage whenever data changes
            useEffect(() => {
                storage.set('posts', posts);
            }, [posts]);

            useEffect(() => {
                storage.set('stories', stories);
            }, [stories]);

            useEffect(() => {
                // Initialize sample data if empty
                if (posts.length === 0) {
                    const samplePosts = [
                        {
                            id: 1,
                            name: 'Sarah Johnson',
                            avatar: 'ðŸ‘©â€ðŸ’¼',
                            content: 'Just finished an amazing hike in the mountains! The view was absolutely breathtaking. Nature never fails to inspire me. ðŸ”ï¸âœ¨',
                            timestamp: Date.now() - 2 * 60 * 60 * 1000,
                            type: 'image',
                            mediaUrl: sampleImages[0],
                            liked: false,
                            likes: 12,
                            comments: []
                        },
                        {
                            id: 2,
                            name: 'Mike Chen',
                            avatar: 'ðŸ‘¨â€ðŸ’»',
                            content: 'Excited to share that I just launched my new project! It\'s been months of hard work, but seeing it come to life is incredibly rewarding. ðŸš€',
                            timestamp: Date.now() - 4 * 60 * 60 * 1000,
                            type: 'video',
                            mediaUrl: sampleVideos[0],
                            liked: false,
                            likes: 8,
                            comments: []
                        },
                        {
                            id: 3,
                            name: 'Emma Davis',
                            avatar: 'ðŸ‘©â€ðŸŽ¨',
                            content: 'Coffee and coding session this morning â˜•ï¸ Working on some exciting new features.',
                            timestamp: Date.now() - 6 * 60 * 60 * 1000,
                            type: 'text',
                            mediaUrl: null,
                            liked: false,
                            likes: 5,
                            comments: []
                        }
                    ];
                    setPosts(samplePosts);
                }

                if (stories.length === 0) {
                    const sampleStories = [
                        {
                            id: 1,
                            name: 'Sarah Johnson',
                            avatar: 'ðŸ‘©â€ðŸ’¼',
                            type: 'image',
                            content: 'Amazing sunset! ðŸŒ…',
                            mediaUrl: sampleImages[1],
                            backgroundColor: '#e53935',
                            timestamp: Date.now() - 2 * 60 * 60 * 1000
                        },
                        {
                            id: 2,
                            name: 'Mike Chen',
                            avatar: 'ðŸ‘¨â€ðŸ’»',
                            type: 'video',
                            content: 'Just launched my project! ðŸš€',
                            mediaUrl: sampleVideos[1],
                            backgroundColor: '#1976d2',
                            timestamp: Date.now() - 4 * 60 * 60 * 1000
                        },
                        {
                            id: 3,
                            name: 'Emma Davis',
                            avatar: 'ðŸ‘©â€ðŸŽ¨',
                            type: 'text',
                            content: 'Coffee and creativity â˜•ï¸',
                            mediaUrl: null,
                            backgroundColor: '#43a047',
                            timestamp: Date.now() - 6 * 60 * 60 * 1000
                        }
                    ];
                    setStories(sampleStories);
                }
            }, []);

            const handleCreatePost = (postData) => {
                const newPost = {
                    id: Date.now(),
                    name: 'You',
                    avatar: 'ðŸ˜Š',
                    content: postData.content,
                    type: postData.type,
                    mediaUrl: postData.mediaUrl,
                    timestamp: Date.now(),
                    liked: false,
                    likes: 0,
                    comments: []
                };
                setPosts([newPost, ...posts]);
            };

            const handleAddStatus = (statusData) => {
                const newStatus = {
                    id: Date.now(),
                    name: 'You',
                    avatar: 'ðŸ˜Š',
                    ...statusData,
                    timestamp: Date.now()
                };
                setStories([newStatus, ...stories]);
            };

            const handleViewStatus = (index) => {
                setCurrentStatusIndex(index);
                setShowStatusModal(true);
            };

            const handleNextStatus = () => {
                setCurrentStatusIndex((prev) => (prev + 1) % stories.length);
            };

            const handlePrevStatus = () => {
                setCurrentStatusIndex((prev) => (prev - 1 + stories.length) % stories.length);
            };

            const handleLike = (postId) => {
                setPosts(posts.map(post => {
                    if (post.id === postId) {
                        const newLiked = !post.liked;
                        return {
                            ...post,
                            liked: newLiked,
                            likes: newLiked ? (post.likes || 0) + 1 : Math.max(0, (post.likes || 0) - 1)
                        };
                    }
                    return post;
                }));
            };

            const handleComment = (postId, commentText) => {
                setPosts(posts.map(post => {
                    if (post.id === postId) {
                        const newComment = {
                            text: commentText,
                            timestamp: Date.now()
                        };
                        return {
                            ...post,
                            comments: [...(post.comments || []), newComment]
                        };
                    }
                    return post;
                }));
            };

            const handleLoadMore = () => {
                const additionalPosts = [
                    {
                        id: Date.now() + 1,
                        name: 'Alex Wilson',
                        avatar: 'ðŸ‘¨â€ðŸŽµ',
                        content: 'Just wrapped up an amazing team meeting! Excited about the new project we\'re starting next week. ðŸš€',
                        timestamp: Date.now() - 8 * 60 * 60 * 1000,
                        type: 'image',
                        mediaUrl: sampleImages[Math.floor(Math.random() * sampleImages.length)],
                        liked: false,
                        likes: 3,
                        comments: []
                    },
                    {
                        id: Date.now() + 2,
                        name: 'Rachel Green',
                        avatar: 'ðŸ‘©â€ðŸŒ¾',
                        content: 'Beautiful sunset from my balcony tonight. Sometimes you need to pause and appreciate the simple moments. ðŸŒ…',
                        timestamp: Date.now() - 10 * 60 * 60 * 1000,
                        type: 'video',
                        mediaUrl: sampleVideos[Math.floor(Math.random() * sampleVideos.length)],
                        liked: false,
                        likes: 7,
                        comments: []
                    }
                ];
                setPosts([...posts, ...additionalPosts]);
            };

            return (
                <div className="container">
                    <div className="main-layout">
                        <div className="main-content">
                            <Stories 
                                stories={stories}
                                onAddStatus={() => setShowAddStatusModal(true)}
                                onViewStatus={handleViewStatus}
                            />
                            <PostCreation onCreatePost={handleCreatePost} />
                            <Feed 
                                posts={posts} 
                                onLoadMore={handleLoadMore}
                                onLike={handleLike}
                                onComment={handleComment}
                            />
                        </div>
                        <Sidebar />
                    </div>

                    <StatusModal 
                        isOpen={showStatusModal}
                        onClose={() => setShowStatusModal(false)}
                        stories={stories}
                        currentIndex={currentStatusIndex}
                        onNext={handleNextStatus}
                        onPrev={handlePrevStatus}
                    />

                    <AddStatusModal 
                        isOpen={showAddStatusModal}
                        onClose={() => setShowAddStatusModal(false)}
                        onAdd={handleAddStatus}
                    />
                </div>
            );
        };

        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'98100b4e43d57476',t:'MTc1ODE5MDEyOC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
